# 技术标签搜索功能说明

## 功能概述

在教师平台的"我的学生"页面新增了技术标签搜索功能，教师可以通过技术标签快速筛选出具有特定技术能力的学生。

## 功能特点

### 1. 搜索框
- **位置**: 在原有"搜索学号或姓名"搜索框旁边
- **图标**: 使用标签图标 (fa-tag)
- **占位符**: "搜索技术标签"
- **宽度**: 48单位宽度

### 2. 搜索逻辑
- 当输入技术标签时，系统会在 `student_technical_tags` 表中搜索匹配的标签
- 仅显示当前教师管理的学生
- 支持精确匹配标签名称

### 3. 显示效果
- 新增"技术标签"列
- 显示标签名称和分类
- 使用蓝色背景的标签样式显示
- 未设置标签的学生显示"-"

## 技术实现

### 1. 后端API

在 `src/services/userService.ts` 中新增方法：

```typescript
static async getStudentsByTechnicalTag(
  teacherId: string, 
  tagName: string, 
  params?: {
    page?: number
    limit?: number
  }
): Promise<{ students: UserWithRole[], total: number }>
```

### 2. 数据库查询流程
1. 首先获取教师管理的学生ID列表 (`teacher_students` 表)
2. 在 `student_technical_tags` 表中搜索指定标签
3. 关联 `student_profiles` 和 `users` 表获取完整学生信息
4. 返回格式化的学生数据

### 3. 前端实现

#### 状态管理
```typescript
const [technicalTagFilter, setTechnicalTagFilter] = useState('');
```

#### 搜索逻辑修改
```typescript
if (technicalTagFilter.trim()) {
  // 使用技术标签搜索
  result = await UserService.getStudentsByTechnicalTag(currentTeacherId, technicalTagFilter, {
    page: currentPage,
    limit: pageSize
  });
} else {
  // 使用普通搜索
  result = await UserService.getTeacherStudents(currentTeacherId, {
    keyword: searchTerm,
    page: currentPage,
    limit: pageSize
  });
}
```

## 数据表结构

### student_technical_tags 表
- `id`: 主键
- `student_profile_id`: 学生档案ID（外键）
- `tag_name`: 标签名称（如：JavaScript、React、Python）
- `tag_category`: 标签分类（programming_language、framework、tool、database）
- `proficiency_level`: 掌握程度（beginner、intermediate、advanced、expert）
- `status`: 状态（active、archived、pending、rejected）

## 测试方法

### 1. 创建测试数据
运行 `create_test_technical_tags.js` 脚本创建测试技术标签数据。

### 2. 测试页面
打开 `test_technical_tag_search.html` 页面进行功能测试。

### 3. 功能测试步骤
1. 进入教师平台的"我的学生"页面
2. 在技术标签搜索框中输入标签名称（如：JavaScript）
3. 查看搜索结果是否正确显示具有该标签的学生
4. 清空搜索框，确认返回正常的学生列表

## 使用场景

1. **技能匹配**: 根据项目需求快速筛选具备特定技能的学生
2. **人才培养**: 了解学生的技术栈分布
3. **团队组建**: 为竞赛或项目寻找合适的技术成员
4. **教学评估**: 掌握学生的学习进度和技术能力

## 注意事项

1. 技术标签搜索与学生姓名搜索是互斥的，同时有内容时优先使用技术标签搜索
2. 搜索结果仅包含状态为 `active` 的技术标签
3. 需要确保 `student_technical_tags` 表中有相关数据
4. 教师只能搜索自己管理的学生